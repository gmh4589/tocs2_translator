#:import Factory kivy.factory.Factory
<MainScreen>:
    BoxLayout:
        id: mainScreen
        orientation: 'vertical'
        canvas:
			Color:
				rgba:(.21, .56, .18, 1)
			Rectangle:
				pos: self.pos
				size: self.size

		BoxLayout:
		    id: upPanel
		    size_hint: (1, .115)
            padding: [10]
            spacing: 3
            ##icon resource from - https://icons8.com/icon

            Button:
                id: openBTN
                background_normal: './data/icon/open.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.fileOpen()

            Button:
                id: saveBTN
                background_normal: './data/icon/save.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
				on_release: root.writeFile()

            Button:
                id: saveBTN
                background_normal: './data/icon/backup.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
				on_release: root.createBackup()

            Button:
                id: backBTN
                background_normal: './data/icon/left_arrow.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
		        on_press: root.nextString('-')

            Button
                id: forwardBTN
                background_normal: './data/icon/right_arrow.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
		        on_press: root.nextString()

            Button:
                id: returnBTN
                background_normal: './data/icon/refresh.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.reFresh()

            Button:
                id: tlBtn
                background_normal: './data/icon/translate.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.translate()

            Button:
                id: settingBTN
                background_normal: './data/icon/setting.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
			    on_press:root.manager.current = 'setting'

            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Найти:'
                    size_hint: .35, .4
                TextInput:
                    id: text4find
                    size_hint: 1, .6

            BoxLayout:
                orientation: 'vertical'
                Label:
                    text: 'Заменить:'
                    size_hint: .5, .4
                TextInput:
                    id: text4replace
                    size_hint: 1, .6

            Button:
                id: returnBTN
                background_normal: './data/icon/find.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.findBTN()

        BoxLayout:
            id: textBox
            size_hint: (1, .7)
            padding: [10]
            spacing: 10
            TextInput:
                id: originalTXT
                readonly: True
            TextInput:
                id: newTXT

        BoxLayout:
            id: downPanel
		    size_hint: (1, .17)
		    GridLayout:
		        rows: 2
		        cols: 2
		        Label:
		            id: rdyLabel
                    font_size: 25
		        Label:
		            id: longLabel
                    font_size: 25

		    BoxLayout:
		        BoxLayout:
		            size_hint: (.75, 1)
		            padding: 10
		            spacing: 5

		            Button:
		                id: fBTN
		                text: 'ДАЛЬШЕ'
		                on_press: root.nextString()
		            BoxLayout:
		                orientation: 'vertical'
		                CodeInput:
		                    id: gotoInput
                        Button:
                            id: gotoBTN
                            text: 'ПЕРЕЙТИ К...'
		                    on_press: root.gotoBTN()
		        BoxLayout:
		            size_hint: (.25, 1)
		            Label:
		                id: percentLabel
		                font_size: 25

<EOFPopup@Popup>:
    auto_dismiss: False
    title: 'Предупреждение'
    size_hint: None, None
    size: 220, 200
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Конец файла!\nСохраните перевод!"
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            padding: 10
            Button:
                text: 'OK'
                on_release: root.dismiss()

<SavedPopup@Popup>:
    auto_dismiss: False
    title: 'Сообщение'
    size_hint: None, None
    size: 200, 200
    Button:
        text: 'Сохранено!'
        background_normal: ''
        background_down: ''
        background_color: .21, .56, .18, 1
        on_release: root.dismiss()

<SettingScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas:
			Color:
				rgba:(.21, .56, .18, 1)
			Rectangle:
				pos: self.pos
				size: self.size

        BoxLayout:
            size_hint: (1, .7)
            padding: [50]
            spacing: 10
            orientation: 'vertical'

            BoxLayout:
                Label:
                    text: 'Период автосохранений\n(в секундах)\nЧтобы отключить, введите 0'
                    font_size: 20
                TextInput:
                    id: autoSavePeriod
                    font_size: 50

            BoxLayout:
                Label:
                    text: 'Период создания бекапов\n(в секундах)\nЧтобы отключить, введите 0'
                    font_size: 20
                TextInput:
                    id: backupPeriod
                    font_size: 50

            BoxLayout:
                size_hint: (1, .1)

            BoxLayout:
                Label:
                    text: 'Онлайн-переводчик'
                    font_size: 25

                GridLayout:
                    id: translatorBox
                    cols: 6
                    Label:
                        text: "Yandex"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Yandex
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Yandex")

                    Label:
                        text: "Google"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Google
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Google")

                    Label:
                        text: "Bing"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Bing
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Bing")

                    Label:
                        text: "DeepL"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: DeepL
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("DeepL")

                    Label:
                        text: "Promt"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Promt
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Promt")

        BoxLayout:
            size_hint: (1, .2)
            padding: [10]
            spacing: 3
            Button:
                text: 'Сохранить'
                on_press: root.setSetting()

            Button:
                text: 'Отмена'
                on_press: root.manager.current = 'main'

<ProgressPopup@Popup>
    auto_dismiss: False
    title: 'Загрузка файла...'
    size_hint: None, None
    size: 200, 200
    Button:
        text: 'Сохранено!'
        background_normal: './data/icon/download.gif'
        background_color: .21, .56, .18, 1