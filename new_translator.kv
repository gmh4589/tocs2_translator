#:import Factory kivy.factory.Factory

<TooltipMDIconButton@MDIconButton+MDTooltip>
    icon_size: '48dp'
    tooltip_bg_color: (.75, .75, .75, .75)

#<InputBox@TextInput>
<InputBox@MDTextField>
    mode: "fill"
    background_color: (0, 0, 0, .75)
    foreground_color: (1, 1, 1, 1)

<MainScreen>:
    canvas:

        Color:
            rgba:(self.r, self.g, self.b, self.a)

        Rectangle:
            pos: self.pos
            size: self.size
            source: "data/color.png"

    BoxLayout:
        id: mainScreen
        orientation: 'vertical'

        BoxLayout:
            id: upPanel
            pos_hint: {"center_x": .5, "center_y": .5}
            # icon resource from - https://icons8.com/icon
            # button color - #12CF35
            # rgba:(.07, .81, .21, 1)

            TooltipMDIconButton:
                id: openBTN
                icon: './data/icon/open.png'
                tooltip_text: 'Открыть файл'
                on_press: root.fileOpen()

            TooltipMDIconButton:
                id: saveBTN
                icon: './data/icon/save.png'
                tooltip_text: 'Сохранить перевод'
                on_release: root.writeFile()

            TooltipMDIconButton:
                id: saveBTN
                icon: './data/icon/backup.png'
                tooltip_text: "Создать бекап"
                on_release: root.createBackup()

            TooltipMDIconButton:
                id: backBTN
                icon: './data/icon/left_arrow.png'
                tooltip_text: "К предыдущей строке"
                on_press: root.nextString('-')

            TooltipMDIconButton:
                id: forwardBTN
                icon: './data/icon/right_arrow.png'
                tooltip_text: "К следующей строке"
                on_press: root.nextString()

            TooltipMDIconButton:
                id: returnBTN
                icon: './data/icon/refresh.png'
                tooltip_text: "Вернуть оригинальный текст"
                on_press: root.reFresh()

            TooltipMDIconButton:
                id: tlBtn
                icon: './data/icon/translate.png'
                tooltip_text: "Перевести онлайн"
                on_press: root.translate()

            TooltipMDIconButton:
                id: settingBTN
                icon: './data/icon/setting.png'
                tooltip_text: "Открыть настройки"
                on_press: root.manager.current = 'setting'

            TooltipMDIconButton:
                id: settingBTN
                icon: './data/icon/dictionary.png'
                tooltip_text: "Добавить в словарь"
                on_press: root.addToDic()

            TooltipMDIconButton:
                id: closeBTN
                icon: './data/icon/close.png'
                tooltip_text: "Закрыть файл"
                on_press: root.closeFile()

            TooltipMDIconButton:
                id: settingBTN
                icon: './data/icon/delete.png'
                tooltip_text: "Очистить поиск \nи замену"
                on_press: root.deleteText()

            TooltipMDIconButton:
                id: returnBTN
                icon: './data/icon/find.png'
                tooltip_text: "Найти и заменить"
                on_press: root.findBTN()

        BoxLayout:
            size_hint: (1, .725)

            GridLayout:
                cols: 2
                rows: 4
                padding: [10, 0, 10, 0]
                spacing: 10

                Label:
                    text: 'Найти:'
                    font_size: 20
                    size_hint: 1, .05

                Label:
                    text: 'Заменить:'
                    font_size: 20
                    size_hint: 1, .05

                InputBox:
                    id: text4find
                    multiline: True
                    size_hint: 1, root.inputSize/10

                InputBox:
                    id: text4replace
                    multiline: True
                    size_hint: 1, root.inputSize/10

                Label:
                    text: 'Оригинал:'
                    font_size: 20
                    size_hint: 1, .05

                Label:
                    text: 'Перевод:'
                    font_size: 20
                    size_hint: 1, .05

                InputBox:
                    id: originalTXT
                    readonly: True
                    multiline: True
                    size_hint: 1, .9 - root.inputSize/10

                InputBox:
                    id: newTXT
                    multiline: True
                    size_hint: 1, .9 - root.inputSize/10

        BoxLayout:
            id: downPanel
		    size_hint: (1, .15)

		    GridLayout:
		        rows: 2
		        cols: 1
		        padding: [20, 0, 0, 0]

		        MDLabel:
		            id: rdyLabel
                    font_size: 25

                MDLabel:
                    id: percentLabel
                    font_size: 25

		    BoxLayout:

		        BoxLayout:
		            size_hint: (.75, 1)
		            padding: 10
		            spacing: 5

		            MDRaisedButton:
		                id: fBTN
		                text: '\nДАЛЬШЕ\n'
		                font_size: '16dp'
		                on_press: root.nextString()

		            BoxLayout:
		                orientation: 'vertical'
		                spacing: 5

		                CodeInput:
		                    id: gotoInput
                            background_color: (0, 0, 0, .75)
                            foreground_color: (1, 1, 1, .5)
                            size_hint_x: .425

                        MDRaisedButton:
                            id: gotoBTN
                            text: 'ПЕРЕЙТИ К...'
		                    font_size: '16dp'
		                    on_press: root.gotoBTN()

		BoxLayout:
		    size_hint: (1, .01)
		    MDProgressBar:
		        id: progressBar
		        color: (.1, .8, .2, 1)

    TooltipMDIconButton:
        id: copyBTN
        pos_hint: {"center_x": .95, "center_y": .1}
        icon: './data/icon/copy.png'
        tooltip_text: "Копировать перевод\nв буфер обмена"
        tooltip_bg_color: (.75, .75, .75, .75)
        on_press: root.copyText('tl')

    TooltipMDIconButton:
        id: copyBTN
        pos_hint: {"center_x": .45, "center_y": .1}
        icon: './data/icon/copy.png'
        tooltip_text: "Копировать оригинал\nв буфер обмена"
        tooltip_bg_color: (.75, .75, .75, .75)
        on_press: root.copyText('or')

