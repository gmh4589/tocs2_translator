#:import Factory kivy.factory.Factory
<Dummy>:
    Button:
        background_normal: ''
        background_down: ''
        background_color: (0, 0, 0, 0)

<MainScreen>:
    canvas:
        Color:
            rgba:(self.r, self.g, self.b, self.a)
        Rectangle:
            pos: self.pos
            size: self.size
            source: "data/color.png"

    BoxLayout:
        id: mainScreen
        orientation: 'vertical'

        BoxLayout:
            id: upPanel
            size_hint: (1, .115)
            padding: [10]
            spacing: 3
            ##icon resource from - https://icons8.com/icon

            Button:
                id: openBTN
                background_normal: './data/icon/open.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.fileOpen()

            Button:
                id: saveBTN
                background_normal: './data/icon/save.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_release: root.writeFile()

            Button:
                id: saveBTN
                background_normal: './data/icon/backup.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_release: root.createBackup()

            Button:
                id: backBTN
                background_normal: './data/icon/left_arrow.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.nextString('-')

            Button
                id: forwardBTN
                background_normal: './data/icon/right_arrow.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.nextString()

            Button:
                id: returnBTN
                background_normal: './data/icon/refresh.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.reFresh()

            Button:
                id: tlBtn
                background_normal: './data/icon/translate.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.translate()

            Button:
                id: settingBTN
                background_normal: './data/icon/setting.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press:root.manager.current = 'setting'

            Button:
                id: settingBTN
                background_normal: './data/icon/close.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.closeFile()

            Dummy:
            Dummy:
            Dummy:
            Dummy:

            Button:
                id: returnBTN
                background_normal: './data/icon/find.png'
                size_hint_max_x: 50
                size_hint_max_y: 50
                on_press: root.findBTN()

        BoxLayout:
            size_hint: (1, .725)

            GridLayout:
                cols: 2
                rows: 4
                padding: [10, 0, 10, 0]
                spacing: 10

                Label:
                    text: 'Найти:'
                    font_size: 20
                    size_hint: 1, .05

                Label:
                    text: 'Заменить:'
                    font_size: 20
                    size_hint: 1, .05

                TextInput:
                    id: text4find
                    size_hint: 1, root.inputSize/10
                    background_color: (0, 0, 0, .75)
                    foreground_color: (1, 1, 1, 1)

                TextInput:
                    id: text4replace
                    size_hint: 1, root.inputSize/10
                    background_color: (0, 0, 0, .75)
                    foreground_color: (1, 1, 1, 1)

                Label:
                    text: 'Оригинал:'
                    font_size: 20
                    size_hint: 1, .05

                Label:
                    text: 'Перевод:'
                    font_size: 20
                    size_hint: 1, .05

                TextInput:
                    id: originalTXT
                    background_color: (0, 0, 0, .75)
                    foreground_color: (1, 1, 1, 1)
                    font_size: 20
                    size_hint: 1, .9 - root.inputSize/10
                    readonly: True

                TextInput:
                    id: newTXT
                    background_color: (0, 0, 0, .75)
                    foreground_color: (1, 1, 1, 1)
                    font_size: 20
                    size_hint: 1, .9 - root.inputSize/10

        BoxLayout:
            id: downPanel
		    size_hint: (1, .15)
		    GridLayout:
		        rows: 2
		        cols: 2
		        Label:
		            id: rdyLabel
                    font_size: 25
		        Label:
		            id: longLabel
                    font_size: 25

		    BoxLayout:
		        BoxLayout:
		            size_hint: (.75, 1)
		            padding: 10
		            spacing: 5

		            Button:
		                id: fBTN
		                text: 'ДАЛЬШЕ'
		                on_press: root.nextString()
		            BoxLayout:
		                orientation: 'vertical'
		                CodeInput:
		                    id: gotoInput
                            background_color: (0, 0, 0, .75)
                            foreground_color: (1, 1, 1, .5)
                        Button:
                            id: gotoBTN
                            text: 'ПЕРЕЙТИ К...'
		                    on_press: root.gotoBTN()
		        BoxLayout:
		            size_hint: (.25, 1)
		            Label:
		                id: percentLabel
		                font_size: 25

		BoxLayout:
		    size_hint: (1, .01)
		    ProgressBar:
		        id: progressBar
                canvas:
                    BorderImage:
                        border: (12, 12, 12, 12)
                        pos: self.x, self.center_y - 12
                        size: self.width, 16
                        source: 'data/grey.png'
                    BorderImage:
                        border: [int(min(self.width * (self.value / float(self.max)) if self.max else 0, 12))] * 4
                        pos: self.x, self.center_y - 12
                        size: self.width * (self.value / float(self.max)) if self.max else 0, 16
                        source: 'data/green.png'

<EOFPopup@Popup>:
    auto_dismiss: False
    title: 'Предупреждение'
    size_hint: None, None
    size: 220, 200
    BoxLayout:
        orientation: 'vertical'
        Label:
            text: "Конец файла!\nСохраните перевод!"
        BoxLayout:
            orientation: 'horizontal'
            spacing: 10
            padding: 10
            Button:
                text: 'OK'
                on_release: root.dismiss()

<SavedPopup@Popup>:
    auto_dismiss: False
    title: 'Сообщение'
    size_hint: None, None
    size: 200, 200
    Button:
        text: 'Сохранено!'
        background_normal: ''
        background_down: ''
        background_color: .21, .56, .18, 1
        on_release: root.dismiss()

<SettingScreen>:
    BoxLayout:
        orientation: 'vertical'
        canvas:
			Color:
				rgba:(root.r, root.g, root.b, root.a)
			Rectangle:
				pos: self.pos
				size: self.size
                source: "data/color.png"

        BoxLayout:
            size_hint: (1, .7)
            padding: [0, 10, 0, 10]
            spacing: 10
            orientation: 'vertical'

            BoxLayout:
                spacing: 10
                size_hint: 1, .5
                padding: [50, 10, 50, 0]
                GridLayout:
                    cols: 2
                    rows: 4
                    spacing: 50

                    Label:
                        text: 'Период автосохранений\n(в секундах)\nЧтобы отключить, введите 0'
                        font_size: 20
                    BoxLayout
                        TextInput:
                            id: autoSavePeriod
                            font_size: 20
                        Dummy:
                        Dummy:
                        Dummy:

                    Label:
                        text: 'Период создания бекапов\n(в секундах)\nЧтобы отключить, введите 0'
                        font_size: 20
                    BoxLayout:
                        TextInput:
                            id: backupPeriod
                            font_size: 20
                        Dummy:
                        Dummy:
                        Dummy:

                    Label:
                        text: 'Размер окна Поиск/Замена'
                        font_size: 20
                    BoxLayout:
                        Slider:
                            id: sizeData
                            min: 1
                            max: 8
                            size_hint: .8, 1
                            value: root.inputSize
                        Label:
                            id: sizeInfo
                            size_hint: .2, 1
                            font_size: 20

                    Label:
                        text: 'Прозрачность фона главного\nменю. (Требуется перезапуск)'
                        font_size: 20
                    BoxLayout:
                        Slider:
                            id: alphaData
                            min: 0
                            max: 1
                            size_hint: .8, 1
                            value: root.a
                        Label:
                            id: alphaInfo
                            size_hint: .2, 1
                            font_size: 20

#                BoxLayout:
#                    ColorPicker:
#                        id: colorPicker

            BoxLayout:
                size_hint: 1, .2
                Label:
                    text: 'Онлайн-переводчик'
                    font_size: 25

                GridLayout:
                    id: translatorBox
                    cols: 6
                    Label:
                        text: "Yandex"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Yandex
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Yandex")

                    Label:
                        text: "Google"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Google
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Google")

                    Label:
                        text: "Bing"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Bing
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Bing")

                    Label:
                        text: "DeepL"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: DeepL
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("DeepL")

                    Label:
                        text: "Promt"
                        size_hint_x: None
                        width: 100
                        font_size: 20
                    CheckBox:
                        group: "translator"
                        id: Promt
                        size_hint_x: None
                        width: 10
                        on_active: root.checkboxClick("Promt")

            BoxLayout:
                size_hint: (1, .2)
                padding: [10]
                spacing: 3
                Button:
                    text: 'Сохранить'
                    on_press: root.setSetting()

                Button:
                    text: 'Отмена'
                    on_press: root.manager.current = 'main'
